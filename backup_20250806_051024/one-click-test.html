<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1602 Lucky Draw - ä¸€é”®æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .test-item {
            transition: all 0.3s ease;
        }
        .test-item.testing {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
        }
        .test-item.success {
            background-color: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
        }
        .test-item.error {
            background-color: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
        }
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .status-pending { background-color: #6b7280; }
        .status-testing { background-color: #3b82f6; animation: pulse 2s infinite; }
        .status-success { background-color: #10b981; }
        .status-error { background-color: #ef4444; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-400 mb-2">ğŸ¯ 1602 Lucky Draw</h1>
            <h2 class="text-2xl text-gray-300 mb-4">ä¸€é”®ç³»ç»Ÿæµ‹è¯•</h2>
            <p class="text-gray-400">å¿«é€ŸéªŒè¯æ‰€æœ‰ç³»ç»ŸåŠŸèƒ½æ˜¯å¦æ­£å¸¸è¿è¡Œ</p>
        </div>

        <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
        <div class="bg-gray-800 rounded-lg p-6 mb-8">
            <div class="flex flex-wrap gap-4 justify-center">
                <button id="run-all-tests" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    ğŸš€ è¿è¡Œæ‰€æœ‰æµ‹è¯•
                </button>
                <button id="test-database" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    ğŸ—„ï¸ æµ‹è¯•æ•°æ®åº“
                </button>
                <button id="test-frontend" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    ğŸ¯ æµ‹è¯•å‰ç«¯
                </button>
                <button id="test-backend" class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    âš™ï¸ æµ‹è¯•åç«¯
                </button>
                <button id="clear-results" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors">
                    ğŸ—‘ï¸ æ¸…é™¤ç»“æœ
                </button>
            </div>
        </div>

        <!-- æµ‹è¯•è¿›åº¦ -->
        <div class="bg-gray-800 rounded-lg p-6 mb-8">
            <h3 class="text-xl font-bold text-gray-300 mb-4">ğŸ“Š æµ‹è¯•è¿›åº¦</h3>
            <div class="w-full bg-gray-700 rounded-full h-4 mb-4">
                <div id="progress-bar" class="bg-blue-600 h-4 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div class="flex justify-between text-sm text-gray-400">
                <span id="progress-text">ç­‰å¾…å¼€å§‹æµ‹è¯•...</span>
                <span id="progress-percentage">0%</span>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="space-y-4">
            <!-- æ•°æ®åº“è¿æ¥æµ‹è¯• -->
            <div id="test-db-connection" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-blue-400">ğŸ”— æ•°æ®åº“è¿æ¥æµ‹è¯•</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>æµ‹è¯• Supabase æ•°æ®åº“è¿æ¥çŠ¶æ€</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>

            <!-- æ•°æ®è¡¨éªŒè¯ -->
            <div id="test-tables" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-green-400">ğŸ“‹ æ•°æ®è¡¨éªŒè¯</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>éªŒè¯æ‰€æœ‰å¿…éœ€çš„æ•°æ®è¡¨æ˜¯å¦å­˜åœ¨</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>

            <!-- ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½ -->
            <div id="test-user-registration" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-purple-400">ğŸ‘¤ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>æµ‹è¯•ç”¨æˆ·æ³¨å†Œå’Œæ•°æ®å­˜å‚¨åŠŸèƒ½</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>

            <!-- æŠ½å¥–ç³»ç»Ÿ -->
            <div id="test-lottery" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-yellow-400">ğŸ² æŠ½å¥–ç³»ç»Ÿ</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>æµ‹è¯•æŠ½å¥–é€»è¾‘å’Œå¥–å“é…ç½®</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>

            <!-- ç®¡ç†åå° -->
            <div id="test-admin" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-orange-400">âš™ï¸ ç®¡ç†åå°</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>æµ‹è¯•ç®¡ç†åŠŸèƒ½å’Œæ•°æ®æŸ¥è¯¢</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>

            <!-- å®æ—¶åŠŸèƒ½ -->
            <div id="test-realtime" class="test-item bg-gray-800 p-6 rounded-lg">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-pink-400">ğŸ“¡ å®æ—¶åŠŸèƒ½</h3>
                    <span class="status-dot status-pending"></span>
                </div>
                <div class="test-details text-sm text-gray-400">
                    <div>æµ‹è¯•å®æ—¶æ•°æ®åŒæ­¥å’Œè®¢é˜…</div>
                </div>
                <div class="test-result mt-4 hidden"></div>
            </div>
        </div>

        <!-- æµ‹è¯•æ€»ç»“ -->
        <div id="test-summary" class="bg-gray-800 rounded-lg p-6 mt-8 hidden">
            <h3 class="text-xl font-bold text-gray-300 mb-4">ğŸ“Š æµ‹è¯•æ€»ç»“</h3>
            <div id="summary-content" class="space-y-2"></div>
        </div>

        <!-- å¿«é€Ÿè®¿é—®é“¾æ¥ -->
        <div class="bg-gray-800 rounded-lg p-6 mt-8">
            <h3 class="text-xl font-bold text-gray-300 mb-4">ğŸ”— å¿«é€Ÿè®¿é—®</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="index.html" target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg text-center transition-colors">
                    <div class="text-2xl mb-2">ğŸ¯</div>
                    <div class="font-semibold">ç”¨æˆ·å‰ç«¯</div>
                </a>
                <a href="admin.html" target="_blank" class="bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg text-center transition-colors">
                    <div class="text-2xl mb-2">âš™ï¸</div>
                    <div class="font-semibold">ç®¡ç†åå°</div>
                </a>
                <a href="system-ready-check.html" target="_blank" class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg text-center transition-colors">
                    <div class="text-2xl mb-2">ğŸ”§</div>
                    <div class="font-semibold">ç³»ç»Ÿæ£€æŸ¥</div>
                </a>
            </div>
        </div>
    </div>

    <!-- åŠ è½½å¿…è¦çš„è„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="enhanced-supabase-connection.js"></script>

    <script>
        // æµ‹è¯•çŠ¶æ€ç®¡ç†
        const testState = {
            total: 6,
            completed: 0,
            passed: 0,
            failed: 0,
            results: {}
        };

        // æµ‹è¯•é¡¹ç›®é…ç½®
        const testItems = [
            { id: 'test-db-connection', name: 'æ•°æ®åº“è¿æ¥æµ‹è¯•', func: testDatabaseConnection },
            { id: 'test-tables', name: 'æ•°æ®è¡¨éªŒè¯', func: testTables },
            { id: 'test-user-registration', name: 'ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½', func: testUserRegistration },
            { id: 'test-lottery', name: 'æŠ½å¥–ç³»ç»Ÿ', func: testLottery },
            { id: 'test-admin', name: 'ç®¡ç†åå°', func: testAdmin },
            { id: 'test-realtime', name: 'å®æ—¶åŠŸèƒ½', func: testRealtime }
        ];

        // æ›´æ–°æµ‹è¯•çŠ¶æ€
        function updateTestStatus(testId, status, message = '') {
            const testElement = document.getElementById(testId);
            const statusDot = testElement.querySelector('.status-dot');
            const resultDiv = testElement.querySelector('.test-result');

            // æ›´æ–°çŠ¶æ€æ ·å¼
            testElement.className = `test-item bg-gray-800 p-6 rounded-lg ${status}`;
            statusDot.className = `status-dot status-${status}`;

            // æ˜¾ç¤ºç»“æœ
            if (message) {
                resultDiv.innerHTML = `<div class="text-sm ${status === 'success' ? 'text-green-400' : status === 'error' ? 'text-red-400' : 'text-blue-400'}">${message}</div>`;
                resultDiv.classList.remove('hidden');
            }

            // æ›´æ–°è¿›åº¦
            if (status === 'success' || status === 'error') {
                testState.completed++;
                if (status === 'success') testState.passed++;
                if (status === 'error') testState.failed++;
                
                const percentage = Math.round((testState.completed / testState.total) * 100);
                document.getElementById('progress-bar').style.width = `${percentage}%`;
                document.getElementById('progress-percentage').textContent = `${percentage}%`;
                document.getElementById('progress-text').textContent = 
                    `å·²å®Œæˆ ${testState.completed}/${testState.total} é¡¹æµ‹è¯•`;

                // å¦‚æœæ‰€æœ‰æµ‹è¯•å®Œæˆï¼Œæ˜¾ç¤ºæ€»ç»“
                if (testState.completed === testState.total) {
                    showTestSummary();
                }
            }
        }

        // æ˜¾ç¤ºæµ‹è¯•æ€»ç»“
        function showTestSummary() {
            const summaryElement = document.getElementById('test-summary');
            const summaryContent = document.getElementById('summary-content');
            
            const successRate = Math.round((testState.passed / testState.total) * 100);
            
            summaryContent.innerHTML = `
                <div class="flex justify-between items-center">
                    <span>æ€»æµ‹è¯•é¡¹ç›®:</span>
                    <span class="font-semibold">${testState.total}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>é€šè¿‡æµ‹è¯•:</span>
                    <span class="font-semibold text-green-400">${testState.passed}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>å¤±è´¥æµ‹è¯•:</span>
                    <span class="font-semibold text-red-400">${testState.failed}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span>æˆåŠŸç‡:</span>
                    <span class="font-semibold ${successRate >= 80 ? 'text-green-400' : successRate >= 60 ? 'text-yellow-400' : 'text-red-400'}">${successRate}%</span>
                </div>
                <div class="mt-4 p-4 rounded-lg ${successRate >= 80 ? 'bg-green-900' : successRate >= 60 ? 'bg-yellow-900' : 'bg-red-900'}">
                    <div class="font-semibold">
                        ${successRate >= 80 ? 'ğŸ‰ ç³»ç»Ÿè¿è¡Œè‰¯å¥½ï¼' : successRate >= 60 ? 'âš ï¸ ç³»ç»ŸåŸºæœ¬å¯ç”¨ï¼Œå»ºè®®æ£€æŸ¥å¤±è´¥é¡¹ç›®' : 'âŒ ç³»ç»Ÿå­˜åœ¨é—®é¢˜ï¼Œéœ€è¦ä¿®å¤'}
                    </div>
                </div>
            `;
            
            summaryElement.classList.remove('hidden');
        }

        // æµ‹è¯•æ•°æ®åº“è¿æ¥
        async function testDatabaseConnection() {
            updateTestStatus('test-db-connection', 'testing', 'æ­£åœ¨æµ‹è¯•æ•°æ®åº“è¿æ¥...');
            
            try {
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_ANON_KEY
                );
                
                const startTime = Date.now();
                const { data, error } = await supabase
                    .from('users')
                    .select('count', { count: 'exact', head: true });
                
                const latency = Date.now() - startTime;
                
                if (error && error.code !== 'PGRST116') {
                    throw error;
                }
                
                updateTestStatus('test-db-connection', 'success', 
                    `âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ (å»¶è¿Ÿ: ${latency}ms)`);
                
            } catch (error) {
                updateTestStatus('test-db-connection', 'error', 
                    `âŒ æ•°æ®åº“è¿æ¥å¤±è´¥: ${error.message}`);
            }
        }

        // æµ‹è¯•æ•°æ®è¡¨
        async function testTables() {
            updateTestStatus('test-tables', 'testing', 'æ­£åœ¨éªŒè¯æ•°æ®è¡¨...');
            
            try {
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_ANON_KEY
                );
                
                const tables = ['users', 'settings', 'knowledge', 'prizes', 'announcements'];
                const results = [];
                
                for (const table of tables) {
                    try {
                        const { data, error } = await supabase
                            .from(table)
                            .select('*')
                            .limit(1);
                        
                        if (error && error.code !== 'PGRST116') {
                            results.push(`âŒ ${table}: ${error.message}`);
                        } else {
                            results.push(`âœ… ${table}: å¯è®¿é—®`);
                        }
                    } catch (error) {
                        results.push(`âŒ ${table}: ${error.message}`);
                    }
                }
                
                const successCount = results.filter(r => r.includes('âœ…')).length;
                
                if (successCount >= tables.length * 0.8) {
                    updateTestStatus('test-tables', 'success', 
                        `âœ… æ•°æ®è¡¨éªŒè¯é€šè¿‡ (${successCount}/${tables.length})<br>${results.join('<br>')}`);
                } else {
                    updateTestStatus('test-tables', 'error', 
                        `âŒ æ•°æ®è¡¨éªŒè¯å¤±è´¥<br>${results.join('<br>')}`);
                }
                
            } catch (error) {
                updateTestStatus('test-tables', 'error', 
                    `âŒ æ•°æ®è¡¨éªŒè¯å¼‚å¸¸: ${error.message}`);
            }
        }

        // æµ‹è¯•ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
        async function testUserRegistration() {
            updateTestStatus('test-user-registration', 'testing', 'æ­£åœ¨æµ‹è¯•ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½...');
            
            try {
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_ANON_KEY
                );
                
                // æµ‹è¯•ç”¨æˆ·æ•°æ®æ’å…¥ï¼ˆæ¨¡æ‹Ÿï¼‰
                const testUser = {
                    name: 'Test User',
                    email: `test_${Date.now()}@example.com`,
                    phone: '1234567890',
                    company: 'Test Company'
                };
                
                const { data, error } = await supabase
                    .from('users')
                    .insert([testUser])
                    .select();
                
                if (error) {
                    throw error;
                }
                
                updateTestStatus('test-user-registration', 'success', 
                    `âœ… ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½æ­£å¸¸ï¼Œæµ‹è¯•ç”¨æˆ·å·²åˆ›å»º`);
                
            } catch (error) {
                updateTestStatus('test-user-registration', 'error', 
                    `âŒ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½å¼‚å¸¸: ${error.message}`);
            }
        }

        // æµ‹è¯•æŠ½å¥–ç³»ç»Ÿ
        async function testLottery() {
            updateTestStatus('test-lottery', 'testing', 'æ­£åœ¨æµ‹è¯•æŠ½å¥–ç³»ç»Ÿ...');
            
            try {
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_ANON_KEY
                );
                
                // æ£€æŸ¥å¥–å“é…ç½®
                const { data: prizes, error: prizesError } = await supabase
                    .from('prizes')
                    .select('*')
                    .eq('is_active', true);
                
                if (prizesError) {
                    throw prizesError;
                }
                
                if (!prizes || prizes.length === 0) {
                    throw new Error('æ²¡æœ‰å¯ç”¨çš„å¥–å“é…ç½®');
                }
                
                updateTestStatus('test-lottery', 'success', 
                    `âœ… æŠ½å¥–ç³»ç»Ÿæ­£å¸¸ï¼Œå‘ç° ${prizes.length} ä¸ªå¯ç”¨å¥–å“`);
                
            } catch (error) {
                updateTestStatus('test-lottery', 'error', 
                    `âŒ æŠ½å¥–ç³»ç»Ÿå¼‚å¸¸: ${error.message}`);
            }
        }

        // æµ‹è¯•ç®¡ç†åå°
        async function testAdmin() {
            updateTestStatus('test-admin', 'testing', 'æ­£åœ¨æµ‹è¯•ç®¡ç†åå°...');
            
            try {
                // æ£€æŸ¥ç®¡ç†é¡µé¢æ˜¯å¦å¯è®¿é—®
                const response = await fetch('admin.html', { method: 'HEAD' });
                if (!response.ok) {
                    throw new Error('ç®¡ç†é¡µé¢æ— æ³•è®¿é—®');
                }
                
                // æµ‹è¯•æ•°æ®æŸ¥è¯¢åŠŸèƒ½
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_SERVICE_ROLE_KEY || window.SUPABASE_CONFIG.SUPABASE_ANON_KEY
                );
                
                const { data, error } = await supabase
                    .from('users')
                    .select('count', { count: 'exact', head: true });
                
                if (error && error.code !== 'PGRST116') {
                    throw error;
                }
                
                updateTestStatus('test-admin', 'success', 
                    `âœ… ç®¡ç†åå°åŠŸèƒ½æ­£å¸¸`);
                
            } catch (error) {
                updateTestStatus('test-admin', 'error', 
                    `âŒ ç®¡ç†åå°å¼‚å¸¸: ${error.message}`);
            }
        }

        // æµ‹è¯•å®æ—¶åŠŸèƒ½
        async function testRealtime() {
            updateTestStatus('test-realtime', 'testing', 'æ­£åœ¨æµ‹è¯•å®æ—¶åŠŸèƒ½...');
            
            try {
                const supabase = window.supabase.createClient(
                    window.SUPABASE_CONFIG.SUPABASE_URL,
                    window.SUPABASE_CONFIG.SUPABASE_ANON_KEY,
                    {
                        realtime: {
                            params: {
                                eventsPerSecond: 10
                            }
                        }
                    }
                );
                
                // æµ‹è¯•å®æ—¶è®¢é˜…
                const channel = supabase
                    .channel('test-channel')
                    .on('postgres_changes', 
                        { event: '*', schema: 'public', table: 'users' }, 
                        (payload) => {
                            console.log('å®æ—¶æ•°æ®å˜åŒ–:', payload);
                        }
                    );
                
                await channel.subscribe();
                
                // ç­‰å¾…ä¸€å°æ®µæ—¶é—´
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // æ¸…ç†è®¢é˜…
                await channel.unsubscribe();
                
                updateTestStatus('test-realtime', 'success', 
                    `âœ… å®æ—¶åŠŸèƒ½æ­£å¸¸`);
                
            } catch (error) {
                updateTestStatus('test-realtime', 'error', 
                    `âŒ å®æ—¶åŠŸèƒ½å¼‚å¸¸: ${error.message}`);
            }
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        async function runAllTests() {
            // é‡ç½®çŠ¶æ€
            testState.completed = 0;
            testState.passed = 0;
            testState.failed = 0;
            
            document.getElementById('test-summary').classList.add('hidden');
            document.getElementById('progress-text').textContent = 'å¼€å§‹è¿è¡Œæµ‹è¯•...';
            
            // ä¾æ¬¡è¿è¡Œæ‰€æœ‰æµ‹è¯•
            for (const test of testItems) {
                await test.func();
                // æ·»åŠ å°å»¶è¿Ÿï¼Œè®©ç”¨æˆ·çœ‹åˆ°è¿›åº¦
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }

        // æ¸…é™¤æµ‹è¯•ç»“æœ
        function clearResults() {
            testState.completed = 0;
            testState.passed = 0;
            testState.failed = 0;
            
            testItems.forEach(test => {
                const testElement = document.getElementById(test.id);
                const statusDot = testElement.querySelector('.status-dot');
                const resultDiv = testElement.querySelector('.test-result');
                
                testElement.className = 'test-item bg-gray-800 p-6 rounded-lg';
                statusDot.className = 'status-dot status-pending';
                resultDiv.classList.add('hidden');
            });
            
            document.getElementById('progress-bar').style.width = '0%';
            document.getElementById('progress-percentage').textContent = '0%';
            document.getElementById('progress-text').textContent = 'ç­‰å¾…å¼€å§‹æµ‹è¯•...';
            document.getElementById('test-summary').classList.add('hidden');
        }

        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('run-all-tests').addEventListener('click', runAllTests);
            document.getElementById('test-database').addEventListener('click', () => {
                testDatabaseConnection();
                testTables();
            });
            document.getElementById('test-frontend').addEventListener('click', () => {
                testUserRegistration();
                testLottery();
            });
            document.getElementById('test-backend').addEventListener('click', () => {
                testAdmin();
                testRealtime();
            });
            document.getElementById('clear-results').addEventListener('click', clearResults);
        });
    </script>
</body>
</html>
# 管理面板功能指南

## 概述
本文档详细介绍了增强版抽奖轮盘系统管理面板的所有功能。

## 主要功能

### 1. 系统状态概览
管理面板首页显示关键统计信息：

#### 统计卡片
- **总用户数** - 系统中注册的用户总数
- **今日注册** - 当天新注册的用户数量
- **今日参与者** - 当天参与抽奖的用户数量（新增功能）
- **总抽奖次数** - 系统累计抽奖次数
- **活跃公告** - 当前活跃的公告数量

### 2. 用户管理系统

#### 用户搜索功能
- **搜索框** - 支持通过姓名或电话号码快速搜索用户
- **实时搜索** - 输入关键词即时显示匹配结果
- **清除搜索** - 一键清除搜索条件，显示所有用户

#### 用户列表显示
用户列表包含以下信息：
- **姓名** - 用户注册姓名
- **电话** - 用户联系电话
- **注册时间** - 用户注册日期和时间
- **抽奖次数** - 用户累计抽奖次数
- **获得奖品** - 用户获得的所有奖品列表（新增功能）
- **剩余机会** - 用户当前剩余的抽奖机会

#### 用户操作功能
每个用户行提供以下操作：
- **+1机会** - 管理员手动为用户添加一次抽奖机会（新增功能）
- **编辑** - 修改用户基本信息和剩余机会
- **删除** - 删除用户记录（需确认）

#### 手动添加抽奖机会流程
1. 搜索或找到目标用户
2. 点击用户行的 "+1机会" 按钮
3. 确认操作
4. 系统自动更新用户的剩余机会和额外机会
5. 前端实时同步更新

### 3. 公告栏管理系统

#### 发布新公告
- **标题输入** - 公告标题（必填）
- **内容输入** - 公告详细内容（支持多行文本）
- **图片上传** - 支持上传广告图片或海报
- **发布按钮** - 一键发布公告

#### 公告列表管理
- **公告列表** - 显示所有已发布的公告
- **状态切换** - 启用/禁用公告显示
- **删除功能** - 删除不需要的公告

#### 前端公告弹窗
- 用户登录时自动显示最新活跃公告
- 支持图片显示
- 30秒后自动关闭或用户手动关闭

### 4. 产品知识库管理

#### 添加产品知识
- **产品名称** - 产品的名称
- **产品分类** - 选择产品类别（啤酒、配件、套餐等）
- **产品描述** - 详细的产品描述
- **产品特点** - 产品的主要特点和卖点
- **产品价格** - 产品价格信息
- **图片上传** - 产品图片上传
- **文档上传** - 相关文档上传

#### 知识库列表
- **产品列表** - 显示所有产品信息
- **分类筛选** - 按产品分类查看
- **编辑功能** - 修改产品信息
- **删除功能** - 删除产品记录

#### AI 推荐集成
- 知识库内容自动格式化为 AI 可用的文本
- 为前端 AI 推荐功能提供精准的产品信息
- 支持实时更新和同步

### 5. 抽奖设置管理
- **奖品配置** - 设置各种奖品及其概率
- **抽奖规则** - 配置抽奖规则和限制
- **奖品库存** - 管理奖品库存数量

### 6. 实时监控功能
- **用户活动** - 实时监控用户注册和抽奖活动
- **系统状态** - 监控系统运行状态
- **数据同步** - 实时数据更新和同步

### 7. 系统工具
- **数据备份** - 备份重要数据
- **缓存清理** - 清理系统缓存
- **系统诊断** - 检查系统健康状态
- **日志查看** - 查看系统操作日志

## 操作流程示例

### 为购买超过 RM60 的客户添加抽奖机会
1. 客户线下购买超过 RM60
2. 管理员打开管理面板
3. 在用户搜索框中输入客户姓名或电话号码
4. 找到对应用户后，点击 "+1机会" 按钮
5. 确认操作
6. 系统自动更新用户抽奖机会
7. 客户在前端登录时立即可以参与抽奖

### 发布新活动公告
1. 管理员进入公告栏管理
2. 填写公告标题和内容
3. 上传相关活动图片
4. 点击发布公告
5. 用户下次登录时会看到新公告弹窗

### 添加新产品到知识库
1. 进入产品知识库管理
2. 填写产品详细信息
3. 上传产品图片和相关文档
4. 保存产品信息
5. AI 推荐功能自动获取新产品信息

## 技术特性

### 实时同步
- 使用 Supabase 实时订阅功能
- 管理员操作后前端立即更新
- 多用户同时操作时数据一致性保证

### 安全性
- 行级安全策略 (RLS) 保护
- 操作权限验证
- 数据输入验证和清理

### 用户体验
- 响应式设计，支持各种设备
- 直观的操作界面
- 实时反馈和状态提示

## 注意事项

### 数据安全
- 定期备份重要数据
- 谨慎使用删除功能
- 保护管理员账户安全

### 操作建议
- 添加抽奖机会前确认用户身份
- 发布公告前检查内容准确性
- 定期更新产品知识库信息

### 故障处理
- 如遇连接问题，检查网络状态
- 操作失败时查看错误提示
- 必要时联系技术支持